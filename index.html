<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>What's My Rankine?</title>

    <!-- Bootstrap Core CSS -->
    <link href="./static/css/bootstrap.min.css" rel="stylesheet">
   
     <!-- Custom CSS -->
    <style>   
    body {
        padding-top: 70px;
        /* Required padding for .navbar-fixed-top. Remove if using .navbar-static-top. Change if height of navigation changes. */
    }
    </style>

<!-- jQuery Version 1.11.1 -->
<!-- <script src="./static/js/jquery.js"></script> -->
<!--<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>-->
<script src="https://code.jquery.com/jquery-1.11.0.min.js"></script>
<script src="https://code.jquery.com/jquery-migrate-1.2.1.min.js"></script>
<script src="https://code.jquery.com/ui/1.10.4/jquery-ui.js"></script>
<!--<script src="//cdnjs.cloudflare.com/ajax/libs/less.js/2.7.2/less.min.js"></script>  <!--// Less CSS preprocesser -->-->
<!--<link rel="stylesheet/less" type="text/css" href="static/css/styles.less" />-->

<!-- Bootstrap Core JavaScript -->
<!-- Latest compiled and minified CSS -->
<!--<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">-->

<!-- Optional theme -->
<!--<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">-->

<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Coolprop Thermodynamic Properties -->
<script src="http://www.coolprop.sourceforge.net/jscript/coolprop.js"></script>
<!--<script src="http://www.coolprop.sourceforge.net/jscript/coolprop.js"></script>-->
<!--<script src="./static/js/coolprop.js"></script>-->
<!--<script src="./static/js/coolprop.js.mem"></script>-->

<!--<script src="./static/js/bootstrap.min.js"></script>-->
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->




</head>

<body>

    <!-- Navigation -->
    <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
        <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="#">What's My Rankine?</a>
            </div>
            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav">
                    <li>
                        <a href="#">About</a>
                    </li>
                    <li>
                        <a href="#">Services</a>
                    </li>
                    <li>
                        <a href="#">Contact</a>
                    </li>
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container -->
    </nav>

    <!-- Page Content -->
    <div class="container" style="padding: 20px;">
    
        <div class="row">
            <div class="col-sm-12 text-center">
                <h1>A Bootstrap Starter Template</h1>
                <p class="lead">Complete with pre-defined file paths that you won't have to change!</p>
                <ul class="list-unstyled">
                    <li>Bootstrap v3.3.6</li>
                    <li>jQuery v1.11.1</li>
                </ul>
            </div>
        </div>
            
            <!-- Parameter Input Form -->
            <!--    <p>Using input and button tags</p>-->
            <!--    <p>num1a</p>-->
            <!--    <input type="number" min=0 class="form-control" id="num1a">-->
            <!--    <p>num2a</p>-->
            <!--    <input type="number" min=0 class="form-control" id="num2a">-->
            <!--    <p>Result:<span id="resulta"></span> </p>-->
            <!--    <button id='add-these' class="btn btn-primary btn-lg btn-block pull-right">add these</button>-->
    
        <!-- Input cycle params -->
        <div class="row">
            
             
            <div class="col-md-6">
                <img src="./static/img/rankine_cycle-min.jpg" class="img-responsive">
            </div>
            
            <div class="col-md-6">
                <form id="rankine-form">    
                
                    <div class="form-group row thermo-group">
                        <label for="FluidName" class="control-label  thermo-label">Working Fluid:</label> <!-- col-xs-4 -->
                        <span class=' form-control-static thermo-field'>Water</span> <!-- col-xs-8-->
                    </div>
                    
                    <div class="form-group row form-inline thermo-group">
                        <label for="highPressure" class="control-label thermo-label">High Pressure [MPa]:</label>
                        <input type='number' class="form-control thermo-field" id="highPressure" value=10 ></input>
                    </div>
                    
                    <div class="form-group row thermo-group">
                        <label for="lowPressure" class="control-label  thermo-label">Low Pressure [MPa]:</label>
                        <input type='number' class="form-control  thermo-field" id="lowPressure" value=1 ></input>
                    </div>
                    
                    <div class="form-group row thermo-group">
                        <label for="massFlowRate" class="control-label col-xs-4 thermo-label">Mass Flow Rate [kg/s]:</label>
                        <input type='number' class="form-control col-xs-8 thermo-field" id="massFlowRate" value=1 ></input>
                    </div>
                    
                    <div class="form-group row thermo-group">
                        <label for="turbineEfficiency" class="control-label col-xs-4 thermo-label">Turbine Efficiency [%]:</label>
                        <input type='number' class="form-control col-xs-8 thermo-field" id="turbineEfficiency" value=100 ></input>
                    </div>
                    
                    <div class="form-group thermo-group">
                         <input type="submit" class="btn btn-primary col-xs-offset-4" id="calc-rankine" value="Calculate"></input>
                    </div>
                    
                    <div class="form-group row thermo-group"> 
                        <label class="control-label col-xs-4 thermo-label" for="output">Thermal Efficiency:</label> 
                        <p id="thermalEfficiency" class="form-control-static col-xs-8 thermo-field"></p>
                    </div>
                    
                    <div class="form-group row thermo-group"> 
                        <label class="control-label col-xs-4 thermo-label" for="netWorkOut">Net Work Out [W]:</label> 
                        <p id="netWorkOut" class="form-control-static col-xs-8 thermo-field"></p>
                    </div>
                    
                </form>
            </div>
    
        </div>

         

    <!-- /.container -->

</body>


<script type="text/javascript">
    $(document).ready(function() {  
      
        $("#rankine-form").submit(function(event) {
            event.preventDefault();
            var name = "Water";
            
            // Get data from form
            var highP = parseFloat($('#highPressure').val())*1000000;
            var lowP = parseFloat($('#lowPressure').val())*1000000;
            var mdot = parseFloat($('#massFlowRate').val());
            var turbEff = parseFloat($("#turbineEfficiency").val())/100;
            
            // After Boiler, before Turbine
            var h1 = Module.PropsSI('H', "P", highP, 'Q', 1.0, name);
            var s1 = Module.PropsSI('S', "P", highP, 'Q', 1.0, name);
            console.log('h1 = %.2f', h1);
            console.log('s1 = %.2f', s1);
            
            // After Turbine, before condenser
            var h2s = Module.PropsSI('H', "S", s1, 'P', lowP, name);
            console.log('h2s = %.2f', h2s);
            var h2 = turbEff * (h2s - h1) + h1;
            console.log('h2 = %.2f', h2);
            
            // After condenser, before pump
            var h3 = Module.PropsSI('H', "P", lowP, 'Q', 0.0, name);
            var rho3 = Module.PropsSI("D", "P", lowP, "Q", 0.0, name);
            console.log('h3 = %.2f', h3);
            
            // after pump, before boiler
            var h4 = Module.PropsSI('H', "D", rho3, 'Q', 0.0, name);
            console.log('h4 = %.2f', h4);

            // calculate cycle thermal efficiency
            var thermEff = (h1 - h2) / (h1 - h4) * 100;

            // calculate net work out
            var netWorkOut = mdot * ((h1-h2)-(h4-h3));
            
            $("#thermalEfficiency").html(Math.round(thermEff*1000)/1000 + ' &#37;');
            $("#netWorkOut").html(Math.round(netWorkOut*1000)/1000 + ' W');

        });
    });
        
        //   $("#math-form").submit(function(event) {
        //     event.preventDefault();
        //     var num1 = parseInt(document.getElementById("num1").value);
        //     var num2 = parseInt(document.getElementById("num2").value);
        //     var result = num1 + num2;
        //     $("#result").html(result);
        //     // document.getElementById("result").value = result; 
        // });
        
        //   function text2key(text)
        //     {
        //         if (text == 'Pressure [Pa]')
        //             return 'P';
        //         else if (text == 'Temperature [K]')
        //             return 'T';
        //         else if (text == 'Density [kg/m&#179;]')
        //             return 'D';
        //     }
        
        // $("#thermo-form").submit(function(event) {
        //     event.preventDefault();
        //     var name = $('#FluidName :selected').text();
        //     var key1 = text2key($('#Name1 :selected').text());
        //     var key2 = text2key($('#Name2 :selected').text());
        //     var val1 = parseFloat($('#Value1').val());
        //     var val2 = parseFloat($('#Value2').val());
            
        //     var T = Module.PropsSI('T', key1, val1, key2, val2, name);
        //     var rho = Module.PropsSI('D', key1, val1, key2, val2, name);
        //     var p = Module.PropsSI('P', key1, val1, key2, val2, name);
        //     var s = Module.PropsSI('S', key1, val1, key2, val2, name);
        //     var h = Module.PropsSI('H', key1, val1, key2, val2, name);
        //     var cp = Module.PropsSI('C', key1, val1, key2, val2, name);
            
        //     text = '';
        //     text += 'T = ' + T + ' K\n' + '<br>';
        //     text += 'rho = ' + rho + ' kg/m&#179; <br>';
        //     text += 'p = ' + p + ' Pa<br>';
        //     text += 's = ' + s + ' J/kg/K<br>';
        //     text += 'h = ' + h + ' J/kg<br>';
        //     text += 'cp = ' + cp + ' J/kg/K<br>';
            
        //     $( "#output" ).html( text);
        // });
        
        // $("#add-these").on("click", function() {
        //   var num1 = parseInt(document.getElementById("num1a").value);
        //   var num2 = parseInt(document.getElementById("num2a").value);
        //   var res = num1 + num2;
        //   $("#resulta").html(res);
        // });

        // var runRankine = document.getElementById("run-rankine");
        // // if (runRankine) {
        // //     runRankine.onsubmit = function () {
        // //         this.maxTemperature.value = this.highPressure.value + this.lowPressure.value; 
        // //         return false;
        // //     };
        // // }
        // function runRankine() {
        //         var num1 = document.getElementById("highPressure").value;
        //         var num2 = document.getElementById("lowPressure").value;
        //         document.getElementById("maxTemperature").value = num1 + num2; 
        //     };
        
</script>

</html>


   
            <!--<div class="col-md-6">-->
            <!--    <div id="cycle-params" class="form-horizontal">-->
                  <!-- Working Fluid -->
            <!--      <fieldset disabled>-->
            <!--          <div class="form-group">-->
            <!--            <label for="workingFluid" class="col-sm-6 control-label">Working Fluid</label>-->
            <!--            <div class="col-sm-6">-->
            <!--                 <select class="c-select form-control" id="workingFluid">-->
            <!--                  <option selected value="1">Water</option>-->
            <!--                  <option value="2">Ammonia</option>-->
            <!--                  <option value="3">Propane</option>-->
            <!--                </select>-->
            <!--            </div>-->
            <!--          </div>-->
            <!--      </fieldset>-->
                  <!-- High Pressure -->
            <!--      <div class="form-group">-->
            <!--        <label for="highPressure" class="col-sm-6 control-label">High Pressure</label>-->
            <!--        <div class="col-sm-6">-->
            <!--          <input type="number" step="any" min="0" class="form-control" id="highPressure">-->
            <!--        </div>-->
            <!--      </div>-->
                  <!-- Low Pressure -->
            <!--      <div class="form-group">-->
            <!--        <label for="lowPressure" class="col-sm-6 control-label">Low Pressure</label>-->
            <!--        <div class="col-sm-6">-->
            <!--          <input type="number" step="any" min="0" class="form-control" id="lowPressure">-->
            <!--        </div>-->
            <!--      </div>-->
                  <!-- Max Temperature -->
            <!--      <div class="form-group">-->
            <!--        <label for="maxTemperature" class="col-sm-6 control-label">Max Temperature</label>-->
            <!--        <div class="col-sm-6">-->
            <!--          <input type="number" step="any" class="form-control" id="maxTemperature">-->
            <!--        </div>-->
            <!--      </div>-->
                  <!-- Turbine Efficiency -->
            <!--      <div class="form-group">-->
            <!--        <label for="turbineEfficiency" class="col-sm-6 control-label">Turbine Efficiency</label>-->
            <!--        <div class="col-sm-6">-->
            <!--          <input type="number" step="any" min="0" max="100" class="form-control" id="turbineEfficiency">-->
            <!--        </div>-->
            <!--      </div>-->
                  <!-- Pump Efficiency -->
            <!--      <div class="form-group">-->
            <!--        <label for="pumpEfficiency" class="col-sm-6 control-label">Pump Efficiency</label>-->
            <!--        <div class="col-sm-6">-->
            <!--          <input type="number" step="any" min="0" max="100" class="form-control" id="pumpEfficiency">-->
            <!--        </div>-->
            <!--      </div>-->
                  <!-- Mass Flow Rate -->
            <!--      <div class="form-group">-->
            <!--        <label for="massFlowRate" class="col-sm-6 control-label">Mass Flow Rate</label>-->
            <!--        <div class="col-sm-6">-->
            <!--          <input type="number" step="any" min="0" class="form-control" id="massFlowRate">-->
            <!--        </div>-->
            <!--      </div>-->
            <!--      <div class="row">-->
            <!--          <div class="col-sm-6">-->
            <!--          </div>-->
            <!--          <div class="col-sm-6">-->
            <!--              <button id="run-rankine" class="btn btn-primary btn-lg btn-block pull-right">Run Cycle</button>-->
            <!--          </div>-->
            <!--      </div>-->
            <!--    </div>-->
            <!--</div>-->
        <!--</div>-->

        <!--<div id="results" class="show">-->
        <!--    <div id="stateTable" class="table-responsive">-->
        <!--        <table class="table table-bordered">-->
        <!--            <caption>State Table</caption>-->
        <!--            <thead>-->
        <!--                <tr>-->
        <!--                <th>State</th>-->
        <!--                <th class="col-sm-2">Temperature</th>-->
        <!--                <th class="col-sm-2">Pressure</th>-->
        <!--                <th class="col-sm-2">Volume</th>-->
        <!--                <th class="col-sm-2">Enthalpy</th>-->
        <!--                <th class="col-sm-2">Entropy</th>-->
        <!--                <th class="col-sm-2">Flow Exergy</th>-->
        <!--                <th class="col-sm-1">Quality</th>-->
        <!--                </tr>-->
        <!--            </thead>-->
        <!--            <tbody>-->
        <!--                <tr>-->
        <!--                    <td>1</td>-->
        <!--                </tr>-->
        <!--                <tr>-->
        <!--                    <td>2</td>-->
        <!--                </tr>-->
        <!--                <tr>-->
        <!--                    <td>3</td>-->
        <!--                </tr>-->
        <!--                <tr>-->
        <!--                    <td>4</td>-->
        <!--                </tr>-->
        <!--            </tbody>-->
        <!--        </table>-->
        <!--    </div>-->
        <!--    <div id="processTable">-->
        <!--        <table class="table table-responsive table-bordered">-->
        <!--        </table>-->
        <!--    </div>-->
        <!--    <div id="cycleResults">-->
        <!--        <table class="table table-responsive table-bordered">-->
        <!--        </table>-->
        <!--    </div>-->
        <!--</div>-->

